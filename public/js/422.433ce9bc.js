"use strict";(self["webpackChunkportfolio"]=self["webpackChunkportfolio"]||[]).push([[422],{1422:function(e,s,a){a.r(s),a.d(s,{default:function(){return Z}});var t=a(6252),n=a(9963),o=a(3577);const r=e=>((0,t.dD)("data-v-7184bab2"),e=e(),(0,t.Cn)(),e),l={class:"header"},i={class:"form"},u=r((()=>(0,t._)("h1",null,"codingheraldapps",-1))),d={class:"input"},p=r((()=>(0,t._)("label",{for:"email"}," email:",-1))),c=r((()=>(0,t._)("button",{type:"submit"},"submit",-1))),m=r((()=>(0,t._)("a",{href:"/login",class:"a"},"back",-1))),w=r((()=>(0,t._)("h1",null,"codingheraldapps",-1))),f={class:"input"},_=r((()=>(0,t._)("label",{for:"password"},"token:",-1))),k=r((()=>(0,t._)("p",null," A message has been sent to your email with the token. check your spam if you can't find it ",-1))),h=r((()=>(0,t._)("button",{type:"submit"},"submit",-1))),g=r((()=>(0,t._)("a",{href:"/forgot_password",class:"a"},"back",-1))),y=r((()=>(0,t._)("h1",null,"Atech acadmey",-1))),b={class:"input"},v=r((()=>(0,t._)("label",{for:"userEmail"},"email:",-1))),T={class:"input"},E=r((()=>(0,t._)("label",{for:"password"},"new Password:",-1))),q=r((()=>(0,t._)("button",{type:"submit"},"submit",-1))),P=r((()=>(0,t._)("footer",null,[(0,t._)("i",{class:"fa-solid fa-copyright"}),(0,t.Uk)("codingherald2022")],-1))),D={class:"response-div"},x={key:0,class:"done"},I=r((()=>(0,t._)("i",{class:"fa-solid fa-circle-check"},null,-1))),S={key:1,class:"error"},U=r((()=>(0,t._)("i",{class:"fa-solid fa-circle-exclamation"},null,-1)));function C(e,s,a,r,C,V){const z=(0,t.up)("Header");return(0,t.wg)(),(0,t.iD)("main",null,[(0,t._)("div",l,[(0,t.Wm)(z)]),(0,t._)("div",i,[r.user.step1?((0,t.wg)(),(0,t.iD)("form",{key:0,onSubmit:s[1]||(s[1]=(0,n.iM)((e=>r.updatePassword()),["prevent"]))},[u,(0,t._)("div",d,[p,(0,t.wy)((0,t._)("input",{type:"email",name:"email",id:"email","onUpdate:modelValue":s[0]||(s[0]=e=>r.user.email=e),placeholder:"Enter your email...",required:""},null,512),[[n.nr,r.user.email]])]),c,m],32)):(0,t.kq)("",!0),r.user.step2?((0,t.wg)(),(0,t.iD)("form",{key:1,onSubmit:s[3]||(s[3]=(0,n.iM)((e=>r.verifyToken()),["prevent"]))},[w,(0,t._)("span",null,(0,o.zw)(r.user.count),1),(0,t._)("div",f,[_,(0,t.wy)((0,t._)("input",{type:"text",name:"newPassword",id:"newPassword","onUpdate:modelValue":s[2]||(s[2]=e=>r.user.token=e),placeholder:"Enter token sent to your email...",required:""},null,512),[[n.nr,r.user.token]])]),k,h,g],32)):(0,t.kq)("",!0),r.user.step3?((0,t.wg)(),(0,t.iD)("form",{key:2,onSubmit:s[6]||(s[6]=(0,n.iM)((e=>r.changePassword()),["prevent"]))},[y,(0,t._)("div",b,[v,(0,t.wy)((0,t._)("input",{type:"email",name:"userEmail",id:"userEmail","onUpdate:modelValue":s[4]||(s[4]=e=>r.user.userEmail=e),placeholder:"Enter email..",required:""},null,512),[[n.nr,r.user.userEmail]])]),(0,t._)("div",T,[E,(0,t.wy)((0,t._)("input",{type:"password",name:"newPassword",id:"newPassword","onUpdate:modelValue":s[5]||(s[5]=e=>r.user.new_password=e),placeholder:"Enter new Password...",required:""},null,512),[[n.nr,r.user.new_password]])]),q],32)):(0,t.kq)("",!0),P]),(0,t._)("div",D,[r.user.success?((0,t.wg)(),(0,t.iD)("div",x,[I,(0,t._)("span",null,(0,o.zw)(r.user.msg),1)])):(0,t.kq)("",!0),r.user.failed?((0,t.wg)(),(0,t.iD)("div",S,[U,(0,t._)("span",null,(0,o.zw)(r.user.msg),1)])):(0,t.kq)("",!0)])])}var V=a(9669),z=a.n(V),K=a(2119),M=a(2262),O=a(7121),j={name:"Forgot_password",components:{Header:O.Z},setup(){let e=(0,M.qj)({email:"",token:"",new_password:"",userEmail:"",count:1,msg:"",step1:!0,step2:!1,step3:!1,success:!1,failed:!1});const s=(0,K.tv)();let a={headers:{"Content-Type":"application/json"}};function t(){z().post("api/forget_password",{email:e.email},a).then((s=>{"OK"===s.statusText&&(localStorage.setItem("updateToken",s.data.updateToken),e.step1=!1,e.step2=!0,r())})).catch((s=>(e.failed=!0,setTimeout(i,3e3),s)))}function n(){z().post("api/forget_password/token",{token:e.token,userToken:localStorage.getItem("updateToken")},a).then((s=>{"OK"===s.statusText&&(e.step2=!1,e.step3=!0)})).catch((s=>{e.failed=!0,e.msg=s.response.data.msg,setTimeout(i,3e3)}))}function o(){z().post("api/forget_password/update",{password:e.new_password,email:e.userEmail},a).then((s=>{"OK"===s.statusText&&(e.success=!0,e.msg=s.data.msg,setTimeout(l,3e3))})).catch((s=>{e.failed=!0,e.msg=s.response.data.msg,setTimeout(i,3e3)}))}function r(){let s=setInterval((()=>{e.count+=1,60===e.count&&clearInterval(s)}),1e3)}function l(){e.success=!1,s.push("/login")}function i(){e.failed=!1}return{user:e,updatePassword:t,verifyToken:n,changePassword:o}}},A=a(3744);const H=(0,A.Z)(j,[["render",C],["__scopeId","data-v-7184bab2"]]);var Z=H}}]);
//# sourceMappingURL=422.433ce9bc.js.map